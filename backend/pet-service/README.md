# Pet Service Microservice â€“ LovingPets

Pet Service is a microservice in the LovingPets project that handles all operations related to pets registered by clients. Its main responsibilities include creating, updating, listing, and deleting pets. Each pet is associated with a client.

## Features

- Create and manage pets (register, update, delete)
- Retrieve all pets or a specific pet by ID
- Retrieve pets of the authenticated user
- Generate AI-based suggestions for a pet
- Assign pets to owners (users)
- Secure endpoints using JWT-based authentication

## Responsibility

This service is responsible for managing pet-related data and operations.
It does not issue tokens, but validates JWT tokens generated by the Auth Service
to secure its endpoints and enforce role-based access control.

## API Endpoints

| Method | Endpoint           | Description                                   | Roles                  |
| ------ | ------------------ | --------------------------------------------- | ---------------------- |
| POST   | /pets              | Register a new pet for the authenticated user | ADMIN, EMPLOYEE        |
| GET    | /pets              | List all pets                                 | ADMIN, EMPLOYEE        |
| GET    | /pets/my-pets      | List pets of the authenticated user           | Any authenticated user |
| GET    | /pets/{id}         | Retrieve pet information by ID                | ADMIN, EMPLOYEE        |
| PUT    | /pets/{id}         | Update pet information                        | ADMIN, EMPLOYEE        |
| DELETE | /pets/{id}         | Delete a pet                                  | ADMIN, EMPLOYEE        |
| GET    | /pets/{id}/suggest | Generate AI-based suggestions for a pet       | Any authenticated user |



## Technologies

- Java 17+ with Spring Boot
- Spring Security with JWT
- PostgreSQL
- Docker for database
- LangChain4j / OpenAI

## Notes

- Each pet belongs to a client.  

## Database Configuration

- Database: `loving_pets_db`
- Username: `pet_service`
- Password: `pet_service_pass`
- Port: `5433`

### Docker Example

```yaml
services:
  postgres:
    image: 'postgres:16'
    restart: unless-stopped
    environment:
      - POSTGRES_DB=loving_pets_db
      - POSTGRES_USER=pet_service
      - POSTGRES_PASSWORD=pet_service_pass
    ports:
      - '5433:5432'
    volumes:
      - pgdata:/var/lib/postgresql/data

volumes:
  pgdata:
    driver: local
```
## Running the Service

> Docker is required because PostgreSQL runs in a Docker container.
> The Spring Boot application runs locally.

1. Start PostgreSQL using Docker:
   ```bash
   docker-compose up -d
2. Build the application:
  ./mvnw clean install
3. Run the service locally:
  ./mvnw spring-boot:run